<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
    <meta charset="UTF-8">
    <title>PayFinish</title>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100&display=swap');
    </style>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
        crossorigin="anonymous"></script>

    <!-- 主要css -->
    <link rel="stylesheet" th:href="@{/style.css}" href="../static/style.css">

    <link rel="stylesheet" th:href="@{/pay/payFinish.css}" href="../static/pay/payFinish.css">
</head>

<body>
    <header th:replace="fragments/header::myHeader"></header>
    <div class="br"></div>


    <div class="container sub">
        <!-- <div class="col-4 sub2 ">
            <div>免費</div>

        </div> -->
        <div class="div col-4 sub2 ">
            <div>
                <h1 th:text="${msg}" class="item">123</h1>
            </div>
            <div id="ren-msg">
                <!-- <h4>jsdlfja;dlsjfs;</h4> -->

            </div>

            <div>
                <a href="/login">
                    <button type="button" class="btn pay-item">
                        重新登入</button>
                </a>
            </div>
        </div>

    </div>
    <div class="br"></div>
    <footer th:replace="fragments/footer::myFooter"></footer>


    <script th:inline="javascript">

        let msg = [[${ msg }]];
        console.log('msg: ', msg);
        if (msg == '交易成功') {
            console.log('交易成功 ===>>');
            let renMsg = [[${ RenMsg }]];
            console.log('RenMsg: ', renMsg);
            let renMsgLable = document.querySelector('#ren-msg');

            // let h4 = document.createElement('h4');
            // h4.innertext = renMsg.tradeDate;
            // console.log('renMsg.tradeDate: ', renMsg.tradeDate.slice(0, 10));

            const orderNumber = document.createElement('h4');
            orderNumber.innerText = 'Order number: ' + renMsg.merchantTradeNo;
            renMsgLable.appendChild(orderNumber);
            const tradeDate = document.createElement('h4')
            tradeDate.innerText = 'Order time: ' + renMsg.tradeDate.slice(0, 10).replaceAll('-', '/');
            renMsgLable.appendChild(tradeDate);
            const tradAmt = document.createElement('h4')
            tradAmt.innerText = 'Order amount: ' + renMsg.tradeAmt;
            renMsgLable.appendChild(tradAmt);
            const paymantType = document.createElement('h4')
            paymantType.innerText = 'Payment type: ' + renMsg.paymentType.replaceAll('_', ' ');
            renMsgLable.appendChild(paymantType);



        } else {
            console.log('交易失敗 ===>>');
        }




    </script>


    <script src="https://code.jquery.com/jquery-3.6.0.slim.js"
        integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>

    <!-- ajax -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</body>

</html>